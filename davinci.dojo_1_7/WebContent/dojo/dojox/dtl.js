/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

require({cache:{"dojox*dtl/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox/string/tokenize","dojo/_base/json","dojo/_base/html","dojox/string/Builder"],function(_1,_2,_3){_1.experimental("dojox.dtl");_1.getObject("dtl",true,dojox);(dojox.dtl._base=function(){var dd=dojox.dtl;dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=_1.extend(function(_4){if(_4){_1._mixin(this,_4);if(_4.get){this._getter=_4.get;delete this.get;}}},{push:function(){var _5=this;var _6=_1.delegate(this);_6.pop=function(){return _5;};return _6;},pop:function(){throw new Error("pop() called on empty Context");},get:function(_7,_8){var n=this._normalize;if(this._getter){var _9=this._getter(_7);if(typeof _9!="undefined"){return n(_9);}}if(typeof this[_7]!="undefined"){return n(this[_7]);}return _8;},_normalize:function(_a){if(_a instanceof Date){_a.year=_a.getFullYear();_a.month=_a.getMonth()+1;_a.day=_a.getDate();_a.date=_a.year+"-"+("0"+_a.month).slice(-2)+"-"+("0"+_a.day).slice(-2);_a.hour=_a.getHours();_a.minute=_a.getMinutes();_a.second=_a.getSeconds();_a.microsecond=_a.getMilliseconds();}return _a;},update:function(_b){var _c=this.push();if(_b){_1._mixin(this,_b);}return _c;}});var _d=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _e=/\s+/g;var _f=function(_10,_11){_10=_10||_e;if(!(_10 instanceof RegExp)){_10=new RegExp(_10,"g");}if(!_10.global){throw new Error("You must use a globally flagged RegExp with split "+_10);}_10.exec("");var _12,_13=[],_14=0,i=0;while(_12=_10.exec(this)){_13.push(this.slice(_14,_10.lastIndex-_12[0].length));_14=_10.lastIndex;if(_11&&(++i>_11-1)){break;}}_13.push(this.slice(_14));return _13;};dd.Token=function(_15,_16){this.token_type=_15;this.contents=new String(_1.trim(_16));this.contents.split=_f;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_17){var bit,_18=[],i=0;_17=_17||999;while(i++<_17&&(bit=_d.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){_18.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){_18.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{_18.push(bit);}}}return _18;};var ddt=dd.text={_get:function(_19,_1a,_1b){var _1c=dd.register.get(_19,_1a.toLowerCase(),_1b);if(!_1c){if(!_1b){throw new Error("No tag found for "+_1a);}return null;}var fn=_1c[1];var _1d=_1c[2];var _1e;if(fn.indexOf(":")!=-1){_1e=fn.split(":");fn=_1e.pop();}_1["require"](_1d);var _1f=_1.getObject(_1d);return _1f[fn||_1a]||_1f[_1a+"_"]||_1f[fn+"_"];},getTag:function(_20,_21){return ddt._get("tag",_20,_21);},getFilter:function(_22,_23){return ddt._get("filter",_22,_23);},getTemplate:function(_24){return new dd.Template(ddt.getTemplateString(_24));},getTemplateString:function(_25){return _1._getText(_25.toString())||"";},_resolveLazy:function(_26,_27,_28){if(_27){if(_28){return _1.fromJson(_1._getText(_26))||{};}else{return dd.text.getTemplateString(_26);}}else{return _1.xhrGet({handleAs:(_28)?"json":"text",url:_26});}},_resolveTemplateArg:function(arg,_29){if(ddt._isTemplate(arg)){if(!_29){var d=new _1.Deferred();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,_29);},_isTemplate:function(arg){return (typeof arg=="undefined")||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,_2a){if(arg.constructor==Object){if(!_2a){var d=new _1.Deferred;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,_2a,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return _3(str,ddt._re,ddt._parseDelims);},_parseDelims:function(_2b,_2c,tag){if(_2b){return [dd.TOKEN_VAR,_2b];}else{if(_2c){var _2d=_1.trim(tag).split(/\s+/g);for(var i=0,_2e;_2e=_2d[i];i++){_1["require"](_2e);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=_1.extend(function(_2f,_30){var str=_30?_2f:ddt._resolveTemplateArg(_2f,true)||"";var _31=ddt.tokenize(str);var _32=new dd._Parser(_31);this.nodelist=_32.parse();},{update:function(_33,_34){return ddt._resolveContextArg(_34).addCallback(this,function(_35){var _36=this.render(new dd._Context(_35));if(_33.forEach){_33.forEach(function(_37){_37.innerHTML=_36;});}else{_1.byId(_33).innerHTML=_36;}return this;});},render:function(_38,_39){_39=_39||this.getBuffer();_38=_38||new dd._Context({});return this.nodelist.render(_38,_39)+"";},getBuffer:function(){return new dojox.string.Builder();}});var _3a=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(_3(str,_3a,function(_3b){return new dd._Filter(_3b);}));}};dd._QuickNodeList=_1.extend(function(_3c){this.contents=_3c;},{render:function(_3d,_3e){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_3e=_3e.concat(this.contents[i].resolve(_3d));}else{_3e=_3e.concat(this.contents[i]);}}return _3e;},dummyRender:function(_3f){return this.render(_3f,dd.Template.prototype.getBuffer()).toString();},clone:function(_40){return this;}});dd._Filter=_1.extend(function(_41){if(!_41){throw new Error("Filter must be called with variable name");}this.contents=_41;var _42=this._cache[_41];if(_42){this.key=_42[0];this.filters=_42[1];}else{this.filters=[];_3(_41,this._re,this._tokenize,this);this._cache[_41]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(typeof arguments[i]!="undefined"&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _43=arguments[pos];if(this._args[pos]=="'"){_43=_43.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_43=_43.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_43];break;}}var fn=ddt.getFilter(arguments[3]);if(!_1.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_44){if(typeof this.key=="undefined"){return "";}var str=this.resolvePath(this.key,_44);for(var i=0,_45;_45=this.filters[i];i++){if(_45[1]){if(_45[1][0]){str=_45[0](str,this.resolvePath(_45[1][1],_44));}else{str=_45[0](str,_45[1][1]);}}else{str=_45[0](str);}}return str;},resolvePath:function(_46,_47){var _48,_49;var _4a=_46.charAt(0);var _4b=_46.slice(-1);if(!isNaN(parseInt(_4a))){_48=(_46.indexOf(".")==-1)?parseInt(_46):parseFloat(_46);}else{if(_4a=="\""&&_4a==_4b){_48=_46.slice(1,-1);}else{if(_46=="true"){return true;}if(_46=="false"){return false;}if(_46=="null"||_46=="None"){return null;}_49=_46.split(".");_48=_47.get(_49[0]);if(_1.isFunction(_48)){var _4c=_47.getThis&&_47.getThis();if(_48.alters_data){_48="";}else{if(_4c){_48=_48.call(_4c);}else{_48="";}}}for(var i=1;i<_49.length;i++){var _4d=_49[i];if(_48){var _4e=_48;if(_1.isObject(_48)&&_4d=="items"&&typeof _48[_4d]=="undefined"){var _4f=[];for(var key in _48){_4f.push([key,_48[key]]);}_48=_4f;continue;}if(_48.get&&_1.isFunction(_48.get)&&_48.get.safe){_48=_48.get(_4d);}else{if(typeof _48[_4d]=="undefined"){_48=_48[_4d];break;}else{_48=_48[_4d];}}if(_1.isFunction(_48)){if(_48.alters_data){_48="";}else{_48=_48.call(_4e);}}else{if(_48 instanceof Date){_48=dd._Context.prototype._normalize(_48);}}}else{return "";}}}}return _48;}});dd._TextNode=dd._Node=_1.extend(function(obj){this.contents=obj;},{set:function(_50){this.contents=_50;return this;},render:function(_51,_52){return _52.concat(this.contents);},isEmpty:function(){return !_1.trim(this.contents);},clone:function(){return this;}});dd._NodeList=_1.extend(function(_53){this.contents=_53||[];this.last="";},{push:function(_54){this.contents.push(_54);return this;},concat:function(_55){this.contents=this.contents.concat(_55);return this;},render:function(_56,_57){for(var i=0;i<this.contents.length;i++){_57=this.contents[i].render(_56,_57);if(!_57){throw new Error("Template must return buffer");}}return _57;},dummyRender:function(_58){return this.render(_58,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=_1.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_59,_5a){var str=this.contents.resolve(_59);if(!str.safe){str=dd._base.escape(""+str);}return _5a.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=_1.extend(function(_5b){this.contents=_5b;},{i:0,parse:function(_5c){var _5d={},_5e;_5c=_5c||[];for(var i=0;i<_5c.length;i++){_5d[_5c[i]]=true;}var _5f=new dd._NodeList();while(this.i<this.contents.length){_5e=this.contents[this.i++];if(typeof _5e=="string"){_5f.push(new dd._TextNode(_5e));}else{var _60=_5e[0];var _61=_5e[1];if(_60==dd.TOKEN_VAR){_5f.push(new dd._VarNode(_61));}else{if(_60==dd.TOKEN_BLOCK){if(_5d[_61]){--this.i;return _5f;}var cmd=_61.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_5f.push(fn(this,new dd.Token(_60,_61)));}}}}}}if(_5c.length){throw new Error("Could not find closing tag(s): "+_5c.toString());}this.contents.length=0;return _5f;},next_token:function(){var _62=this.contents[this.i++];return new dd.Token(_62[0],_62[1]);},delete_first_token:function(){this.i++;},skip_past:function(_63){while(this.i<this.contents.length){var _64=this.contents[this.i++];if(_64[0]==dd.TOKEN_BLOCK&&_64[1]==_63){return;}}throw new Error("Unclosed tag found when looking for "+_63);},create_variable_node:function(_65){return new dd._VarNode(_65);},create_text_node:function(_66){return new dd._TextNode(_66||"");},getTemplate:function(_67){return new dd.Template(_67);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_68,_69){var _6a=dd.register._registry[_68+"s"];for(var i=0,_6b;_6b=_6a[i];i++){if(typeof _6b[0]=="string"){if(_6b[0]==_69){return _6b;}}else{if(_69.match(_6b[0])){return _6b;}}}},getAttributeTags:function(){var _6c=[];var _6d=dd.register._registry.attributes;for(var i=0,_6e;_6e=_6d[i];i++){if(_6e.length==3){_6c.push(_6e);}else{var fn=_1.getObject(_6e[1]);if(fn&&_1.isFunction(fn)){_6e.push(fn);_6c.push(_6e);}}}return _6c;},_any:function(_6f,_70,_71){for(var _72 in _71){for(var i=0,fn;fn=_71[_72][i];i++){var key=fn;if(_1.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var _73=fn;if(_73.substr(0,5)=="attr:"){_73=_73.slice(5);}dd.register._registry.attributes.push([_73.toLowerCase(),_70+"."+_72+"."+_73]);}key=key.toLowerCase();}dd.register._registry[_6f].push([key,fn,_70+"."+_72]);}}},tags:function(_74,_75){dd.register._any("tags",_74,_75);},filters:function(_76,_77){dd.register._any("filters",_76,_77);}};var _78=/&/g;var _79=/</g;var _7a=/>/g;var _7b=/'/g;var _7c=/"/g;dd._base.escape=function(_7d){return dd.mark_safe(_7d.replace(_78,"&amp;").replace(_79,"&lt;").replace(_7a,"&gt;").replace(_7c,"&quot;").replace(_7b,"&#39;"));};dd._base.safe=function(_7e){if(typeof _7e=="string"){_7e=new String(_7e);}if(typeof _7e=="object"){_7e.safe=true;}return _7e;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});})();return dojox.dtl;});},"dojox*string/tokenize":function(){define(["dojo/_base/kernel"],function(_7f){_7f.getObject("string",true,dojox);dojox.string.tokenize=function(str,re,_80,_81){var _82=[];var _83,_84,_85=0;while(_83=re.exec(str)){_84=str.slice(_85,re.lastIndex-_83[0].length);if(_84.length){_82.push(_84);}if(_80){if(_7f.isOpera){var _86=_83.slice(0);while(_86.length<_83.length){_86.push(null);}_83=_86;}var _87=_80.apply(_81,_83.slice(1).concat(_82.length));if(typeof _87!="undefined"){_82.push(_87);}}_85=re.lastIndex;}_84=str.slice(_85);if(_84.length){_82.push(_84);}return _82;};return dojox.string.tokenize;});},"dojox*string/Builder":function(){define(["dojo/_base/kernel"],function(_88){_88.getObject("string",true,dojox);dojox.string.Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_89){return this.append.apply(this,_89);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_8a,_8b){b=b.replace(_8a,_8b);this.length=b.length;return this;};this.remove=function(_8c,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_8c)+b.substr(_8c+len);this.length=b.length;return this;};this.insert=function(_8d,str){if(_8d==0){b=str+b;}else{b=b.slice(0,_8d)+str+b.slice(_8d);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};return dojox.string.Builder;});},"dojox*dtl/Context":function(){define(["dojo/_base/kernel","dojo/_base/lang","./_base"],function(_8e,_8f,dd){dojox.dtl.Context=_8e.extend(function(_90){this._this={};dd._Context.call(this,_90);},dd._Context.prototype,{getKeys:function(){var _91=[];for(var key in this){if(this.hasOwnProperty(key)&&key!="_this"){_91.push(key);}}return _91;},extend:function(obj){return _8e.delegate(this,obj);},filter:function(_92){var _93=new dd.Context();var _94=[];var i,arg;if(_92 instanceof dd.Context){_94=_92.getKeys();}else{if(typeof _92=="object"){for(var key in _92){_94.push(key);}}else{for(i=0;arg=arguments[i];i++){if(typeof arg=="string"){_94.push(arg);}}}}for(i=0,key;key=_94[i];i++){_93[key]=this[key];}return _93;},setThis:function(_95){this._this=_95;},getThis:function(){return this._this;},hasKey:function(key){if(this._getter){var got=this._getter(key);if(typeof got!="undefined"){return true;}}if(typeof this[key]!="undefined"){return true;}return false;}});return dojox.dtl.Context;});},"dojox*dtl/tag/logic":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_base","dojo/_base/array"],function(_96,_97,dd){_96.getObject("dtl.tag.logic",true,dojox);var ddt=dd.text;var _98=dd.tag.logic;_98.IfNode=_96.extend(function(_99,_9a,_9b,_9c){this.bools=_99;this.trues=_9a;this.falses=_9b;this.type=_9c;},{render:function(_9d,_9e){var i,_9f,_a0,_a1,_a2;if(this.type=="or"){for(i=0;_9f=this.bools[i];i++){_a0=_9f[0];_a1=_9f[1];_a2=_a1.resolve(_9d);if((_a2&&!_a0)||(_a0&&!_a2)){if(this.falses){_9e=this.falses.unrender(_9d,_9e);}return (this.trues)?this.trues.render(_9d,_9e,this):_9e;}}if(this.trues){_9e=this.trues.unrender(_9d,_9e);}return (this.falses)?this.falses.render(_9d,_9e,this):_9e;}else{for(i=0;_9f=this.bools[i];i++){_a0=_9f[0];_a1=_9f[1];_a2=_a1.resolve(_9d);if(_a2==_a0){if(this.trues){_9e=this.trues.unrender(_9d,_9e);}return (this.falses)?this.falses.render(_9d,_9e,this):_9e;}}if(this.falses){_9e=this.falses.unrender(_9d,_9e);}return (this.trues)?this.trues.render(_9d,_9e,this):_9e;}return _9e;},unrender:function(_a3,_a4){_a4=(this.trues)?this.trues.unrender(_a3,_a4):_a4;_a4=(this.falses)?this.falses.unrender(_a3,_a4):_a4;return _a4;},clone:function(_a5){var _a6=(this.trues)?this.trues.clone(_a5):null;var _a7=(this.falses)?this.falses.clone(_a5):null;return new this.constructor(this.bools,_a6,_a7,this.type);}});_98.IfEqualNode=_96.extend(function(_a8,_a9,_aa,_ab,_ac){this.var1=new dd._Filter(_a8);this.var2=new dd._Filter(_a9);this.trues=_aa;this.falses=_ab;this.negate=_ac;},{render:function(_ad,_ae){var _af=this.var1.resolve(_ad);var _b0=this.var2.resolve(_ad);_af=(typeof _af!="undefined")?_af:"";_b0=(typeof _af!="undefined")?_b0:"";if((this.negate&&_af!=_b0)||(!this.negate&&_af==_b0)){if(this.falses){_ae=this.falses.unrender(_ad,_ae,this);}return (this.trues)?this.trues.render(_ad,_ae,this):_ae;}if(this.trues){_ae=this.trues.unrender(_ad,_ae,this);}return (this.falses)?this.falses.render(_ad,_ae,this):_ae;},unrender:function(_b1,_b2){return _98.IfNode.prototype.unrender.call(this,_b1,_b2);},clone:function(_b3){var _b4=this.trues?this.trues.clone(_b3):null;var _b5=this.falses?this.falses.clone(_b3):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_b4,_b5,this.negate);}});_98.ForNode=_96.extend(function(_b6,_b7,_b8,_b9){this.assign=_b6;this.loop=new dd._Filter(_b7);this.reversed=_b8;this.nodelist=_b9;this.pool=[];},{render:function(_ba,_bb){var i,j,k;var _bc=false;var _bd=this.assign;for(k=0;k<_bd.length;k++){if(typeof _ba[_bd[k]]!="undefined"){_bc=true;_ba=_ba.push();break;}}if(!_bc&&_ba.forloop){_bc=true;_ba=_ba.push();}var _be=this.loop.resolve(_ba)||[];for(i=_be.length;i<this.pool.length;i++){this.pool[i].unrender(_ba,_bb,this);}if(this.reversed){_be=_be.slice(0).reverse();}var _bf=_96.isObject(_be)&&!_96.isArrayLike(_be);var _c0=[];if(_bf){for(var key in _be){_c0.push(_be[key]);}}else{_c0=_be;}var _c1=_ba.forloop={parentloop:_ba.get("forloop",{})};var j=0;for(i=0;i<_c0.length;i++){var _c2=_c0[i];_c1.counter0=j;_c1.counter=j+1;_c1.revcounter0=_c0.length-j-1;_c1.revcounter=_c0.length-j;_c1.first=!j;_c1.last=(j==_c0.length-1);if(_bd.length>1&&_96.isArrayLike(_c2)){if(!_bc){_bc=true;_ba=_ba.push();}var _c3={};for(k=0;k<_c2.length&&k<_bd.length;k++){_c3[_bd[k]]=_c2[k];}_96.mixin(_ba,_c3);}else{_ba[_bd[0]]=_c2;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_bb));}_bb=this.pool[j++].render(_ba,_bb,this);}delete _ba.forloop;if(_bc){_ba=_ba.pop();}else{for(k=0;k<_bd.length;k++){delete _ba[_bd[k]];}}return _bb;},unrender:function(_c4,_c5){for(var i=0,_c6;_c6=this.pool[i];i++){_c5=_c6.unrender(_c4,_c5);}return _c5;},clone:function(_c7){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_c7));}});_96.mixin(_98,{if_:function(_c8,_c9){var i,_ca,_cb,_cc=[],_cd=_c9.contents.split();_cd.shift();_c9=_cd.join(" ");_cd=_c9.split(" and ");if(_cd.length==1){_cb="or";_cd=_c9.split(" or ");}else{_cb="and";for(i=0;i<_cd.length;i++){if(_cd[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;_ca=_cd[i];i++){var not=false;if(_ca.indexOf("not ")==0){_ca=_ca.slice(4);not=true;}_cc.push([not,new dd._Filter(_ca)]);}var _ce=_c8.parse(["else","endif"]);var _cf=false;var _c9=_c8.next_token();if(_c9.contents=="else"){_cf=_c8.parse(["endif"]);_c8.next_token();}return new _98.IfNode(_cc,_ce,_cf,_cb);},_ifequal:function(_d0,_d1,_d2){var _d3=_d1.split_contents();if(_d3.length!=3){throw new Error(_d3[0]+" takes two arguments");}var end="end"+_d3[0];var _d4=_d0.parse(["else",end]);var _d5=false;var _d1=_d0.next_token();if(_d1.contents=="else"){_d5=_d0.parse([end]);_d0.next_token();}return new _98.IfEqualNode(_d3[1],_d3[2],_d4,_d5,_d2);},ifequal:function(_d6,_d7){return _98._ifequal(_d6,_d7);},ifnotequal:function(_d8,_d9){return _98._ifequal(_d8,_d9,true);},for_:function(_da,_db){var _dc=_db.contents.split();if(_dc.length<4){throw new Error("'for' statements should have at least four words: "+_db.contents);}var _dd=_dc[_dc.length-1]=="reversed";var _de=(_dd)?-3:-2;if(_dc[_dc.length+_de]!="in"){throw new Error("'for' tag received an invalid argument: "+_db.contents);}var _df=_dc.slice(1,_de).join(" ").split(/ *, */);for(var i=0;i<_df.length;i++){if(!_df[i]||_df[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_db.contents);}}var _e0=_da.parse(["endfor"]);_da.next_token();return new _98.ForNode(_df,_dc[_dc.length+_de+1],_dd,_e0);}});return dojox.dtl.tag.logic;});},"dojox*dtl/tag/loop":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_base","dojox/string/tokenize","dojo/_base/array"],function(_e1,_e2,dd,_e3){_e1.getObject("dtl.tag.loop",true,dojox);var _e4=dd.tag.loop;_e4.CycleNode=_e1.extend(function(_e5,_e6,_e7,_e8){this.cyclevars=_e5;this.name=_e6;this.contents=_e7;this.shared=_e8||{counter:-1,map:{}};},{render:function(_e9,_ea){if(_e9.forloop&&!_e9.forloop.counter0){this.shared.counter=-1;}++this.shared.counter;var _eb=this.cyclevars[this.shared.counter%this.cyclevars.length];var map=this.shared.map;if(!map[_eb]){map[_eb]=new dd._Filter(_eb);}_eb=map[_eb].resolve(_e9,_ea);if(this.name){_e9[this.name]=_eb;}this.contents.set(_eb);return this.contents.render(_e9,_ea);},unrender:function(_ec,_ed){return this.contents.unrender(_ec,_ed);},clone:function(_ee){return new this.constructor(this.cyclevars,this.name,this.contents.clone(_ee),this.shared);}});_e4.IfChangedNode=_e1.extend(function(_ef,_f0,_f1){this.nodes=_ef;this._vars=_f0;this.shared=_f1||{last:null,counter:0};this.vars=_e1.map(_f0,function(_f2){return new dojox.dtl._Filter(_f2);});},{render:function(_f3,_f4){if(_f3.forloop){if(_f3.forloop.counter<=this.shared.counter){this.shared.last=null;}this.shared.counter=_f3.forloop.counter;}var _f5;if(this.vars.length){_f5=_e1.toJson(_e1.map(this.vars,function(_f6){return _f6.resolve(_f3);}));}else{_f5=this.nodes.dummyRender(_f3,_f4);}if(_f5!=this.shared.last){var _f7=(this.shared.last===null);this.shared.last=_f5;_f3=_f3.push();_f3.ifchanged={firstloop:_f7};_f4=this.nodes.render(_f3,_f4);_f3=_f3.pop();}else{_f4=this.nodes.unrender(_f3,_f4);}return _f4;},unrender:function(_f8,_f9){return this.nodes.unrender(_f8,_f9);},clone:function(_fa){return new this.constructor(this.nodes.clone(_fa),this._vars,this.shared);}});_e4.RegroupNode=_e1.extend(function(_fb,key,_fc){this._expression=_fb;this.expression=new dd._Filter(_fb);this.key=key;this.alias=_fc;},{_push:function(_fd,_fe,_ff){if(_ff.length){_fd.push({grouper:_fe,list:_ff});}},render:function(_100,_101){_100[this.alias]=[];var list=this.expression.resolve(_100);if(list){var last=null;var _102=[];for(var i=0;i<list.length;i++){var id=list[i][this.key];if(last!==id){this._push(_100[this.alias],last,_102);last=id;_102=[list[i]];}else{_102.push(list[i]);}}this._push(_100[this.alias],last,_102);}return _101;},unrender:function(_103,_104){return _104;},clone:function(_105,_106){return this;}});_e1.mixin(_e4,{cycle:function(_107,_108){var args=_108.split_contents();if(args.length<2){throw new Error("'cycle' tag requires at least two arguments");}if(args[1].indexOf(",")!=-1){var vars=args[1].split(",");args=[args[0]];for(var i=0;i<vars.length;i++){args.push("\""+vars[i]+"\"");}}if(args.length==2){var name=args[args.length-1];if(!_107._namedCycleNodes){throw new Error("No named cycles in template: '"+name+"' is not defined");}if(!_107._namedCycleNodes[name]){throw new Error("Named cycle '"+name+"' does not exist");}return _107._namedCycleNodes[name];}if(args.length>4&&args[args.length-2]=="as"){var name=args[args.length-1];var node=new _e4.CycleNode(args.slice(1,args.length-2),name,_107.create_text_node());if(!_107._namedCycleNodes){_107._namedCycleNodes={};}_107._namedCycleNodes[name]=node;}else{node=new _e4.CycleNode(args.slice(1),null,_107.create_text_node());}return node;},ifchanged:function(_109,_10a){var _10b=_10a.contents.split();var _10c=_109.parse(["endifchanged"]);_109.delete_first_token();return new _e4.IfChangedNode(_10c,_10b.slice(1));},regroup:function(_10d,_10e){var _10f=_e3(_10e.contents,/(\s+)/g,function(_110){return _110;});if(_10f.length<11||_10f[_10f.length-3]!="as"||_10f[_10f.length-7]!="by"){throw new Error("Expected the format: regroup list by key as newList");}var _111=_10f.slice(2,-8).join("");var key=_10f[_10f.length-5];var _112=_10f[_10f.length-1];return new _e4.RegroupNode(_111,key,_112);}});return dojox.dtl.tag.loop;});},"dojox*dtl/tag/date":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_base","../utils/date"],function(dojo,lang,dd,ddud){dojo.getObject("dtl.tag.date",true,dojox);dojox.dtl.tag.date.NowNode=function(_113,node){this._format=_113;this.format=new ddud.DateFormat(_113);this.contents=node;};dojo.extend(dojox.dtl.tag.date.NowNode,{render:function(_114,_115){this.contents.set(this.format.format(new Date()));return this.contents.render(_114,_115);},unrender:function(_116,_117){return this.contents.unrender(_116,_117);},clone:function(_118){return new this.constructor(this._format,this.contents.clone(_118));}});dojox.dtl.tag.date.now=function(_119,_11a){var _11b=_11a.split_contents();if(_11b.length!=2){throw new Error("'now' statement takes one argument");}return new dojox.dtl.tag.date.NowNode(_11b[1].slice(1,-1),_119.create_text_node());};return dojox.dtl.tag.date;});},"dojox*dtl/utils/date":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox/date/php"],function(dojo,lang,ddp){dojo.getObject("dtl.utils.date",true,dojox);dojox.dtl.utils.date.DateFormat=function(_11c){ddp.DateFormat.call(this,_11c);};dojo.extend(dojox.dtl.utils.date.DateFormat,ddp.DateFormat.prototype,{f:function(){return (!this.date.getMinutes())?this.g():this.g()+":"+this.i();},N:function(){return dojox.dtl.utils.date._months_ap[this.date.getMonth()];},P:function(){if(!this.date.getMinutes()&&!this.date.getHours()){return "midnight";}if(!this.date.getMinutes()&&this.date.getHours()==12){return "noon";}return this.f()+" "+this.a();}});dojo.mixin(dojox.dtl.utils.date,{format:function(date,_11d){var df=new dojox.dtl.utils.date.DateFormat(_11d);return df.format(date);},timesince:function(d,now){if(!(d instanceof Date)){d=new Date(d.year,d.month,d.day);}if(!now){now=new Date();}var _11e=Math.abs(now.getTime()-d.getTime());for(var i=0,_11f;_11f=dojox.dtl.utils.date._chunks[i];i++){var _120=Math.floor(_11e/_11f[0]);if(_120){break;}}return _120+" "+_11f[1](_120);},_chunks:[[60*60*24*365*1000,function(n){return (n==1)?"year":"years";}],[60*60*24*30*1000,function(n){return (n==1)?"month":"months";}],[60*60*24*7*1000,function(n){return (n==1)?"week":"weeks";}],[60*60*24*1000,function(n){return (n==1)?"day":"days";}],[60*60*1000,function(n){return (n==1)?"hour":"hours";}],[60*1000,function(n){return (n==1)?"minute":"minutes";}]],_months_ap:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]});return dojox.dtl.utils.date;});},"dojox*date/php":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/date","dojox/string/tokenize"],function(dojo,_121,_122,dxst){dojo.getObject("date.php",true,dojox);dojox.date.php.format=function(date,_123){var df=new dojox.date.php.DateFormat(_123);return df.format(date);};dojox.date.php.DateFormat=function(_124){if(!this.regex){var keys=[];for(var key in this.constructor.prototype){if(dojo.isString(key)&&key.length==1&&dojo.isFunction(this[key])){keys.push(key);}}this.constructor.prototype.regex=new RegExp("(?:(\\\\.)|(["+keys.join("")+"]))","g");}var _125=[];this.tokens=dxst(_124,this.regex,function(_126,_127,i){if(_127){_125.push([i,_127]);return _127;}if(_126){return _126.charAt(1);}});this.replacements=_125;};dojo.extend(dojox.date.php.DateFormat,{weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdays_3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthdays:[31,28,31,30,31,30,31,31,30,31,30,31],format:function(date){this.date=date;for(var i=0,_128;_128=this.replacements[i];i++){this.tokens[_128[0]]=this[_128[1]]();}return this.tokens.join("");},d:function(){var j=this.j();return (j.length==1)?"0"+j:j;},D:function(){return this.weekdays_3[this.date.getDay()];},j:function(){return this.date.getDate()+"";},l:function(){return this.weekdays[this.date.getDay()];},N:function(){var w=this.w();return (!w)?7:w;},S:function(){switch(this.date.getDate()){case 11:case 12:case 13:return "th";case 1:case 21:case 31:return "st";case 2:case 22:return "nd";case 3:case 23:return "rd";default:return "th";}},w:function(){return this.date.getDay()+"";},z:function(){var _129=this.date.getTime()-new Date(this.date.getFullYear(),0,1).getTime();return Math.floor(_129/86400000)+"";},W:function(){var week;var _12a=new Date(this.date.getFullYear(),0,1).getDay()+1;var w=this.date.getDay()+1;var z=parseInt(this.z());if(z<=(8-_12a)&&_12a>4){var _12b=new Date(this.date.getFullYear()-1,this.date.getMonth(),this.date.getDate());if(_12a==5||(_12a==6&&_122.isLeapYear(_12b))){week=53;}else{week=52;}}else{var i;if(Boolean(this.L())){i=366;}else{i=365;}if((i-z)<(4-w)){week=1;}else{var j=z+(7-w)+(_12a-1);week=Math.ceil(j/7);if(_12a>4){--week;}}}return week;},F:function(){return this.months[this.date.getMonth()];},m:function(){var n=this.n();return (n.length==1)?"0"+n:n;},M:function(){return this.months_3[this.date.getMonth()];},n:function(){return this.date.getMonth()+1+"";},t:function(){return (Boolean(this.L())&&this.date.getMonth()==1)?29:this.monthdays[this.getMonth()];},L:function(){return (_122.isLeapYear(this.date))?"1":"0";},o:function(){},Y:function(){return this.date.getFullYear()+"";},y:function(){return this.Y().slice(-2);},a:function(){return this.date.getHours()>=12?"pm":"am";},b:function(){return this.a().toUpperCase();},B:function(){var off=this.date.getTimezoneOffset()+60;var secs=(this.date.getHours()*3600)+(this.date.getMinutes()*60)+this.getSeconds()+(off*60);var beat=Math.abs(Math.floor(secs/86.4)%1000)+"";while(beat.length<2){beat="0"+beat;}return beat;},g:function(){return (this.date.getHours()>12)?this.date.getHours()-12+"":this.date.getHours()+"";},G:function(){return this.date.getHours()+"";},h:function(){var g=this.g();return (g.length==1)?"0"+g:g;},H:function(){var G=this.G();return (G.length==1)?"0"+G:G;},i:function(){var mins=this.date.getMinutes()+"";return (mins.length==1)?"0"+mins:mins;},s:function(){var secs=this.date.getSeconds()+"";return (secs.length==1)?"0"+secs:secs;},e:function(){return _122.getTimezoneName(this.date);},I:function(){},O:function(){var off=Math.abs(this.date.getTimezoneOffset());var _12c=Math.floor(off/60)+"";var mins=(off%60)+"";if(_12c.length==1){_12c="0"+_12c;}if(mins.length==1){_12c="0"+mins;}return ((this.date.getTimezoneOffset()<0)?"+":"-")+_12c+mins;},P:function(){var O=this.O();return O.substring(0,2)+":"+O.substring(2,4);},T:function(){return this.e().substring(0,3);},Z:function(){return this.date.getTimezoneOffset()*-60;},c:function(){return this.Y()+"-"+this.m()+"-"+this.d()+"T"+this.h()+":"+this.i()+":"+this.s()+this.P();},r:function(){return this.D()+", "+this.d()+" "+this.M()+" "+this.Y()+" "+this.H()+":"+this.i()+":"+this.s()+" "+this.O();},U:function(){return Math.floor(this.date.getTime()/1000);}});return dojox.date.php;});},"dojo*date":function(){define(["./_base/kernel"],function(dojo){dojo.getObject("date",true,dojo);dojo.date.getDaysInMonth=function(_12d){var _12e=_12d.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_12e==1&&dojo.date.isLeapYear(_12d)){return 29;}return days[_12e];};dojo.date.isLeapYear=function(_12f){var year=_12f.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_130){var str=_130.toString();var tz="";var _131;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_131=str.match(pat))){tz=_131[1];}else{str=_130.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_131=str.match(pat))){tz=_131[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_132,_133,_134){_132=new Date(+_132);_133=new Date(+(_133||new Date()));if(_134=="date"){_132.setHours(0,0,0,0);_133.setHours(0,0,0,0);}else{if(_134=="time"){_132.setFullYear(0,0,0);_133.setFullYear(0,0,0);}}if(_132>_133){return 1;}if(_132<_133){return -1;}return 0;};dojo.date.add=function(date,_135,_136){var sum=new Date(+date);var _137=false;var _138="Date";switch(_135){case "day":break;case "weekday":var days,_139;var mod=_136%5;if(!mod){days=(_136>0)?5:-5;_139=(_136>0)?((_136-5)/5):((_136+5)/5);}else{days=mod;_139=parseInt(_136/5);}var strt=date.getDay();var adj=0;if(strt==6&&_136>0){adj=1;}else{if(strt==0&&_136<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_136>0)?2:-2;}_136=(7*_139)+days+adj;break;case "year":_138="FullYear";_137=true;break;case "week":_136*=7;break;case "quarter":_136*=3;case "month":_137=true;_138="Month";break;default:_138="UTC"+_135.charAt(0).toUpperCase()+_135.substring(1)+"s";}if(_138){sum["set"+_138](sum["get"+_138]()+_136);}if(_137&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_13a,_13b,_13c){_13b=_13b||new Date();_13c=_13c||"day";var _13d=_13b.getFullYear()-_13a.getFullYear();var _13e=1;switch(_13c){case "quarter":var m1=_13a.getMonth();var m2=_13b.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_13d*4);_13e=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_13a,_13b,"day"));var _13f=parseInt(dojo.date.difference(_13a,_13b,"week"));var mod=days%7;if(mod==0){days=_13f*5;}else{var adj=0;var aDay=_13a.getDay();var bDay=_13b.getDay();_13f=parseInt(days/7);mod=days%7;var _140=new Date(_13a);_140.setDate(_140.getDate()+(_13f*7));var _141=_140.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_141+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_141+mod)<0:adj=2;}}}days+=adj;days-=(_13f*2);}_13e=days;break;case "year":_13e=_13d;break;case "month":_13e=(_13b.getMonth()-_13a.getMonth())+(_13d*12);break;case "week":_13e=parseInt(dojo.date.difference(_13a,_13b,"day")/7);break;case "day":_13e/=24;case "hour":_13e/=60;case "minute":_13e/=60;case "second":_13e/=1000;case "millisecond":_13e*=_13b.getTime()-_13a.getTime();}return Math.round(_13e);};return dojo.date;});},"dojox*dtl/tag/loader":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_base","dojo/_base/array","dojo/_base/connect"],function(dojo,lang,dd){dojo.getObject("dtl.tag.loader",true,dojox);var ddtl=dd.tag.loader;ddtl.BlockNode=dojo.extend(function(name,_142){this.name=name;this.nodelist=_142;},{"super":function(){if(this.parent){var html=this.parent.nodelist.dummyRender(this.context,null,true);if(typeof html=="string"){html=new String(html);}html.safe=true;return html;}return "";},render:function(_143,_144){var name=this.name;var _145=this.nodelist;var _146;if(_144.blocks){var _147=_144.blocks[name];if(_147){_146=_147.parent;_145=_147.nodelist;_147.used=true;}}this.rendered=_145;_143=_143.push();this.context=_143;this.parent=null;if(_145!=this.nodelist){this.parent=this;}_143.block=this;if(_144.getParent){var _148=_144.getParent();var _149=dojo.connect(_144,"onSetParent",function(node,up,root){if(up&&root){_144.setParent(_148);}});}_144=_145.render(_143,_144,this);_149&&dojo.disconnect(_149);_143=_143.pop();return _144;},unrender:function(_14a,_14b){return this.rendered.unrender(_14a,_14b);},clone:function(_14c){return new this.constructor(this.name,this.nodelist.clone(_14c));},toString:function(){return "dojox.dtl.tag.loader.BlockNode";}});ddtl.ExtendsNode=dojo.extend(function(_14d,_14e,_14f,_150,key){this.getTemplate=_14d;this.nodelist=_14e;this.shared=_14f;this.parent=_150;this.key=key;},{parents:{},getParent:function(_151){var _152=this.parent;if(!_152){var _153;_152=this.parent=_151.get(this.key,false);if(!_152){throw new Error("extends tag used a variable that did not resolve");}if(typeof _152=="object"){var url=_152.url||_152.templatePath;if(_152.shared){this.shared=true;}if(url){_152=this.parent=url.toString();}else{if(_152.templateString){_153=_152.templateString;_152=this.parent=" ";}else{_152=this.parent=this.parent.toString();}}}if(_152&&_152.indexOf("shared:")===0){this.shared=true;_152=this.parent=_152.substring(7,_152.length);}}if(!_152){throw new Error("Invalid template name in 'extends' tag.");}if(_152.render){return _152;}if(this.parents[_152]){return this.parents[_152];}this.parent=this.getTemplate(_153||dojox.dtl.text.getTemplateString(_152));if(this.shared){this.parents[_152]=this.parent;}return this.parent;},render:function(_154,_155){var _156=this.getParent(_154);_156.blocks=_156.blocks||{};_155.blocks=_155.blocks||{};for(var i=0,node;node=this.nodelist.contents[i];i++){if(node instanceof dojox.dtl.tag.loader.BlockNode){var old=_156.blocks[node.name];if(old&&old.nodelist!=node.nodelist){_155=old.nodelist.unrender(_154,_155);}_156.blocks[node.name]=_155.blocks[node.name]={shared:this.shared,nodelist:node.nodelist,used:false};}}this.rendered=_156;return _156.nodelist.render(_154,_155,this);},unrender:function(_157,_158){return this.rendered.unrender(_157,_158,this);},toString:function(){return "dojox.dtl.block.ExtendsNode";}});ddtl.IncludeNode=dojo.extend(function(path,_159,_15a,text,_15b){this._path=path;this.constant=_159;this.path=(_159)?path:new dd._Filter(path);this.getTemplate=_15a;this.text=text;this.parsed=(arguments.length==5)?_15b:true;},{_cache:[{},{}],render:function(_15c,_15d){var _15e=((this.constant)?this.path:this.path.resolve(_15c)).toString();var _15f=Number(this.parsed);var _160=false;if(_15e!=this.last){_160=true;if(this.last){_15d=this.unrender(_15c,_15d);}this.last=_15e;}var _161=this._cache[_15f];if(_15f){if(!_161[_15e]){_161[_15e]=dd.text._resolveTemplateArg(_15e,true);}if(_160){var _162=this.getTemplate(_161[_15e]);this.rendered=_162.nodelist;}return this.rendered.render(_15c,_15d,this);}else{if(this.text instanceof dd._TextNode){if(_160){this.rendered=this.text;this.rendered.set(dd.text._resolveTemplateArg(_15e,true));}return this.rendered.render(_15c,_15d);}else{if(!_161[_15e]){var _163=[];var div=document.createElement("div");div.innerHTML=dd.text._resolveTemplateArg(_15e,true);var _164=div.childNodes;while(_164.length){var _165=div.removeChild(_164[0]);_163.push(_165);}_161[_15e]=_163;}if(_160){this.nodelist=[];var _166=true;for(var i=0,_167;_167=_161[_15e][i];i++){this.nodelist.push(_167.cloneNode(true));}}for(var i=0,node;node=this.nodelist[i];i++){_15d=_15d.concat(node);}}}return _15d;},unrender:function(_168,_169){if(this.rendered){_169=this.rendered.unrender(_168,_169);}if(this.nodelist){for(var i=0,node;node=this.nodelist[i];i++){_169=_169.remove(node);}}return _169;},clone:function(_16a){return new this.constructor(this._path,this.constant,this.getTemplate,this.text.clone(_16a),this.parsed);}});dojo.mixin(ddtl,{block:function(_16b,_16c){var _16d=_16c.contents.split();var name=_16d[1];_16b._blocks=_16b._blocks||{};_16b._blocks[name]=_16b._blocks[name]||[];_16b._blocks[name].push(name);var _16e=_16b.parse(["endblock","endblock "+name]).rtrim();_16b.next_token();return new dojox.dtl.tag.loader.BlockNode(name,_16e);},extends_:function(_16f,_170){var _171=_170.contents.split();var _172=false;var _173=null;var key=null;if(_171[1].charAt(0)=="\""||_171[1].charAt(0)=="'"){_173=_171[1].substring(1,_171[1].length-1);}else{key=_171[1];}if(_173&&_173.indexOf("shared:")==0){_172=true;_173=_173.substring(7,_173.length);}var _174=_16f.parse();return new dojox.dtl.tag.loader.ExtendsNode(_16f.getTemplate,_174,_172,_173,key);},include:function(_175,_176){var _177=_176.contents.split();if(_177.length!=2){throw new Error(_177[0]+" tag takes one argument: the name of the template to be included");}var path=_177[1];var _178=false;if((path.charAt(0)=="\""||path.slice(-1)=="'")&&path.charAt(0)==path.slice(-1)){path=path.slice(1,-1);_178=true;}return new ddtl.IncludeNode(path,_178,_175.getTemplate,_175.create_text_node());},ssi:function(_179,_17a){var _17b=_17a.contents.split();var _17c=false;if(_17b.length==3){_17c=(_17b.pop()=="parsed");if(!_17c){throw new Error("Second (optional) argument to ssi tag must be 'parsed'");}}var node=ddtl.include(_179,new dd.Token(_17a.token_type,_17b.join(" ")));node.parsed=_17c;return node;}});return dojox.dtl.tag.loader;});},"dojox*dtl/tag/misc":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_base","dojo/_base/array","dojo/_base/connect"],function(dojo,lang,dd){dojo.getObject("dtl.tag.misc",true,dojox);var ddtm=dd.tag.misc;ddtm.DebugNode=dojo.extend(function(text){this.text=text;},{render:function(_17d,_17e){var keys=_17d.getKeys();var _17f=[];var only={};for(var i=0,key;key=keys[i];i++){only[key]=_17d[key];_17f+="["+key+": "+typeof _17d[key]+"]\n";}return this.text.set(_17f).render(_17d,_17e,this);},unrender:function(_180,_181){return _181;},clone:function(_182){return new this.constructor(this.text.clone(_182));},toString:function(){return "ddtm.DebugNode";}});ddtm.FilterNode=dojo.extend(function(_183,_184){this._varnode=_183;this._nodelist=_184;},{render:function(_185,_186){var _187=this._nodelist.render(_185,new dojox.string.Builder());_185=_185.update({"var":_187.toString()});var _188=this._varnode.render(_185,_186);_185=_185.pop();return _186;},unrender:function(_189,_18a){return _18a;},clone:function(_18b){return new this.constructor(this._expression,this._nodelist.clone(_18b));}});ddtm.FirstOfNode=dojo.extend(function(vars,text){this._vars=vars;this.vars=dojo.map(vars,function(item){return new dojox.dtl._Filter(item);});this.contents=text;},{render:function(_18c,_18d){for(var i=0,item;item=this.vars[i];i++){var _18e=item.resolve(_18c);if(typeof _18e!="undefined"){if(_18e===null){_18e="null";}this.contents.set(_18e);return this.contents.render(_18c,_18d);}}return this.contents.unrender(_18c,_18d);},unrender:function(_18f,_190){return this.contents.unrender(_18f,_190);},clone:function(_191){return new this.constructor(this._vars,this.contents.clone(_191));}});ddtm.SpacelessNode=dojo.extend(function(_192,text){this.nodelist=_192;this.contents=text;},{render:function(_193,_194){if(_194.getParent){var _195=[dojo.connect(_194,"onAddNodeComplete",this,"_watch"),dojo.connect(_194,"onSetParent",this,"_watchParent")];_194=this.nodelist.render(_193,_194);dojo.disconnect(_195[0]);dojo.disconnect(_195[1]);}else{var _196=this.nodelist.dummyRender(_193);this.contents.set(_196.replace(/>\s+</g,"><"));_194=this.contents.render(_193,_194);}return _194;},unrender:function(_197,_198){return this.nodelist.unrender(_197,_198);},clone:function(_199){return new this.constructor(this.nodelist.clone(_199),this.contents.clone(_199));},_isEmpty:function(node){return (node.nodeType==3&&!node.data.match(/[^\s\n]/));},_watch:function(node){if(this._isEmpty(node)){var _19a=false;if(node.parentNode.firstChild==node){node.parentNode.removeChild(node);}}else{var _19b=node.parentNode.childNodes;if(node.nodeType==1&&_19b.length>2){for(var i=2,_19c;_19c=_19b[i];i++){if(_19b[i-2].nodeType==1&&this._isEmpty(_19b[i-1])){node.parentNode.removeChild(_19b[i-1]);return;}}}}},_watchParent:function(node){var _19d=node.childNodes;if(_19d.length){while(node.childNodes.length){var last=node.childNodes[node.childNodes.length-1];if(!this._isEmpty(last)){return;}node.removeChild(last);}}}});ddtm.TemplateTagNode=dojo.extend(function(tag,text){this.tag=tag;this.contents=text;},{mapping:{openblock:"{%",closeblock:"%}",openvariable:"{{",closevariable:"}}",openbrace:"{",closebrace:"}",opencomment:"{#",closecomment:"#}"},render:function(_19e,_19f){this.contents.set(this.mapping[this.tag]);return this.contents.render(_19e,_19f);},unrender:function(_1a0,_1a1){return this.contents.unrender(_1a0,_1a1);},clone:function(_1a2){return new this.constructor(this.tag,this.contents.clone(_1a2));}});ddtm.WidthRatioNode=dojo.extend(function(_1a3,max,_1a4,text){this.current=new dd._Filter(_1a3);this.max=new dd._Filter(max);this.width=_1a4;this.contents=text;},{render:function(_1a5,_1a6){var _1a7=+this.current.resolve(_1a5);var max=+this.max.resolve(_1a5);if(typeof _1a7!="number"||typeof max!="number"||!max){this.contents.set("");}else{this.contents.set(""+Math.round((_1a7/max)*this.width));}return this.contents.render(_1a5,_1a6);},unrender:function(_1a8,_1a9){return this.contents.unrender(_1a8,_1a9);},clone:function(_1aa){return new this.constructor(this.current.getExpression(),this.max.getExpression(),this.width,this.contents.clone(_1aa));}});ddtm.WithNode=dojo.extend(function(_1ab,_1ac,_1ad){this.target=new dd._Filter(_1ab);this.alias=_1ac;this.nodelist=_1ad;},{render:function(_1ae,_1af){var _1b0=this.target.resolve(_1ae);_1ae=_1ae.push();_1ae[this.alias]=_1b0;_1af=this.nodelist.render(_1ae,_1af);_1ae=_1ae.pop();return _1af;},unrender:function(_1b1,_1b2){return _1b2;},clone:function(_1b3){return new this.constructor(this.target.getExpression(),this.alias,this.nodelist.clone(_1b3));}});dojo.mixin(ddtm,{comment:function(_1b4,_1b5){_1b4.skip_past("endcomment");return dd._noOpNode;},debug:function(_1b6,_1b7){return new ddtm.DebugNode(_1b6.create_text_node());},filter:function(_1b8,_1b9){var rest=_1b9.contents.split(null,1)[1];var _1ba=_1b8.create_variable_node("var|"+rest);var _1bb=_1b8.parse(["endfilter"]);_1b8.next_token();return new ddtm.FilterNode(_1ba,_1bb);},firstof:function(_1bc,_1bd){var _1be=_1bd.split_contents().slice(1);if(!_1be.length){throw new Error("'firstof' statement requires at least one argument");}return new ddtm.FirstOfNode(_1be,_1bc.create_text_node());},spaceless:function(_1bf,_1c0){var _1c1=_1bf.parse(["endspaceless"]);_1bf.delete_first_token();return new ddtm.SpacelessNode(_1c1,_1bf.create_text_node());},templatetag:function(_1c2,_1c3){var _1c4=_1c3.contents.split();if(_1c4.length!=2){throw new Error("'templatetag' statement takes one argument");}var tag=_1c4[1];var _1c5=ddtm.TemplateTagNode.prototype.mapping;if(!_1c5[tag]){var keys=[];for(var key in _1c5){keys.push(key);}throw new Error("Invalid templatetag argument: '"+tag+"'. Must be one of: "+keys.join(", "));}return new ddtm.TemplateTagNode(tag,_1c2.create_text_node());},widthratio:function(_1c6,_1c7){var _1c8=_1c7.contents.split();if(_1c8.length!=4){throw new Error("widthratio takes three arguments");}var _1c9=+_1c8[3];if(typeof _1c9!="number"){throw new Error("widthratio final argument must be an integer");}return new ddtm.WidthRatioNode(_1c8[1],_1c8[2],_1c9,_1c6.create_text_node());},with_:function(_1ca,_1cb){var _1cc=_1cb.split_contents();if(_1cc.length!=4||_1cc[2]!="as"){throw new Error("do_width expected format as 'with value as name'");}var _1cd=_1ca.parse(["endwith"]);_1ca.next_token();return new ddtm.WithNode(_1cc[1],_1cc[3],_1cd);}});return dojox.dtl.tag.misc;});},"dojox*dtl/ext-dojo/NodeList":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_base"],function(dojo,lang,dd){dojo.getObject("dtl.ext-dojo.NodeList",true,dojox);dojo.extend(dojo.NodeList,{dtl:function(_1ce,_1cf){var d=dd;var self=this;var _1d0=function(_1d1,_1d2){var _1d3=_1d1.render(new d._Context(_1d2));self.forEach(function(node){node.innerHTML=_1d3;});};d.text._resolveTemplateArg(_1ce).addCallback(function(_1d4){_1ce=new d.Template(_1d4);d.text._resolveContextArg(_1cf).addCallback(function(_1d5){_1d0(_1ce,_1d5);});});return this;}});return dojox.dtl.ext-dojo.NodeList;});}}});define(["./dtl/_base"],function(_1d6){return _1d6;});