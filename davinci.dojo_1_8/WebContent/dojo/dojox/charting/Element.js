//>>built
define("dojox/charting/Element",["dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(_1,_2,_3,_4,_5,_6){return _4("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:true,constructor:function(_7){this.chart=_7;this.group=null;this.htmlElements=[];this.dirty=true;this.trailingSymbol="...";this._events=[];},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.group.removeShape();var _8=this.group.children;for(var i=0;i<_8.length;++i){_6.dispose(_8[i]);}this.group.clear();this.group=null;}this.dirty=true;if(this._events.length){_2.forEach(this._events,function(_9){_9.shape.disconnect(_9.handle);});this._events=[];}return this;},cleanGroup:function(_a){this.destroyHtmlElements();if(!_a){_a=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_a.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){_2.forEach(this.htmlElements,_3.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();},getTextWidth:function(s,_b){return _5._base._getTextBox(s,{font:_b}).w||0;},getTextWithLimitLength:function(s,_c,_d,_e){if(!s||s.length<=0){return {text:"",truncated:_e||false};}if(!_d||_d<=0){return {text:s,truncated:_e||false};}var _f=2,_10=0.618,_11=s.substring(0,1)+this.trailingSymbol,_12=this.getTextWidth(_11,_c);if(_d<=_12){return {text:_11,truncated:true};}var _13=this.getTextWidth(s,_c);if(_13<=_d){return {text:s,truncated:_e||false};}else{var _14=0,end=s.length;while(_14<end){if(end-_14<=_f){while(this.getTextWidth(s.substring(0,_14)+this.trailingSymbol,_c)>_d){_14-=1;}return {text:(s.substring(0,_14)+this.trailingSymbol),truncated:true};}var _15=_14+Math.round((end-_14)*_10),_16=this.getTextWidth(s.substring(0,_15),_c);if(_16<_d){_14=_15;end=end;}else{_14=_14;end=_15;}}}},getTextWithLimitCharCount:function(s,_17,_18,_19){if(!s||s.length<=0){return {text:"",truncated:_19||false};}if(!_18||_18<=0||s.length<=_18){return {text:s,truncated:_19||false};}return {text:s.substring(0,_18)+this.trailingSymbol,truncated:true};},_plotFill:function(_1a,dim,_1b){if(!_1a||!_1a.type||!_1a.space){return _1a;}var _1c=_1a.space;switch(_1a.type){case "linear":if(_1c==="plot"||_1c==="shapeX"||_1c==="shapeY"){_1a=_5.makeParameters(_5.defaultLinearGradient,_1a);_1a.space=_1c;if(_1c==="plot"||_1c==="shapeX"){var _1d=dim.height-_1b.t-_1b.b;_1a.y1=_1b.t+_1d*_1a.y1/100;_1a.y2=_1b.t+_1d*_1a.y2/100;}if(_1c==="plot"||_1c==="shapeY"){var _1d=dim.width-_1b.l-_1b.r;_1a.x1=_1b.l+_1d*_1a.x1/100;_1a.x2=_1b.l+_1d*_1a.x2/100;}}break;case "radial":if(_1c==="plot"){_1a=_5.makeParameters(_5.defaultRadialGradient,_1a);_1a.space=_1c;var _1e=dim.width-_1b.l-_1b.r,_1f=dim.height-_1b.t-_1b.b;_1a.cx=_1b.l+_1e*_1a.cx/100;_1a.cy=_1b.t+_1f*_1a.cy/100;_1a.r=_1a.r*Math.sqrt(_1e*_1e+_1f*_1f)/200;}break;case "pattern":if(_1c==="plot"||_1c==="shapeX"||_1c==="shapeY"){_1a=_5.makeParameters(_5.defaultPattern,_1a);_1a.space=_1c;if(_1c==="plot"||_1c==="shapeX"){var _1d=dim.height-_1b.t-_1b.b;_1a.y=_1b.t+_1d*_1a.y/100;_1a.height=_1d*_1a.height/100;}if(_1c==="plot"||_1c==="shapeY"){var _1d=dim.width-_1b.l-_1b.r;_1a.x=_1b.l+_1d*_1a.x/100;_1a.width=_1d*_1a.width/100;}}break;}return _1a;},_shapeFill:function(_20,_21){if(!_20||!_20.space){return _20;}var _22=_20.space;switch(_20.type){case "linear":if(_22==="shape"||_22==="shapeX"||_22==="shapeY"){_20=_5.makeParameters(_5.defaultLinearGradient,_20);_20.space=_22;if(_22==="shape"||_22==="shapeX"){var _23=_21.width;_20.x1=_21.x+_23*_20.x1/100;_20.x2=_21.x+_23*_20.x2/100;}if(_22==="shape"||_22==="shapeY"){var _23=_21.height;_20.y1=_21.y+_23*_20.y1/100;_20.y2=_21.y+_23*_20.y2/100;}}break;case "radial":if(_22==="shape"){_20=_5.makeParameters(_5.defaultRadialGradient,_20);_20.space=_22;_20.cx=_21.x+_21.width/2;_20.cy=_21.y+_21.height/2;_20.r=_20.r*_21.width/200;}break;case "pattern":if(_22==="shape"||_22==="shapeX"||_22==="shapeY"){_20=_5.makeParameters(_5.defaultPattern,_20);_20.space=_22;if(_22==="shape"||_22==="shapeX"){var _23=_21.width;_20.x=_21.x+_23*_20.x/100;_20.width=_23*_20.width/100;}if(_22==="shape"||_22==="shapeY"){var _23=_21.height;_20.y=_21.y+_23*_20.y/100;_20.height=_23*_20.height/100;}}break;}return _20;},_pseudoRadialFill:function(_24,_25,_26,_27,end){if(!_24||_24.type!=="radial"||_24.space!=="shape"){return _24;}var _28=_24.space;_24=_5.makeParameters(_5.defaultRadialGradient,_24);_24.space=_28;if(arguments.length<4){_24.cx=_25.x;_24.cy=_25.y;_24.r=_24.r*_26/100;return _24;}var _29=arguments.length<5?_27:(end+_27)/2;return {type:"linear",x1:_25.x,y1:_25.y,x2:_25.x+_24.r*_26*Math.cos(_29)/100,y2:_25.y+_24.r*_26*Math.sin(_29)/100,colors:_24.colors};return _24;}});});